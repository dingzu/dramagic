# Dramagic 项目开发规范

## 项目概述
Dramagic 是一个前后端分离的项目，前端部署在 Vercel，后端部署在 Railway。

## 开发规范

### 1. 文档体系

本项目采用**规格文档 + 开发日志**分离的文档管理方式：

| 文档 | 路径 | 用途 |
|------|------|------|
| 项目规格 | `docs/development.md` | 项目结构、技术栈、配置、功能规格（只记录最终状态） |
| 开发日志 | `docs/changelog.md` | 每日开发进度、功能更新、问题修复（按时间记录） |
| API 文档 | `docs/api.md` | 接口详细说明 |
| 部署文档 | `docs/deployment.md` | 部署指南 |
| 产品文档 | `docs/product.md` | 产品说明 |
| MaaS 文档 | `docs/maas.md` | MaaS 服务接入信息 |

### 2. 文档更新规范

**每次开发后必须更新文档：**

#### 更新 `docs/changelog.md`（更新日志）
- 按版本号记录（从 v0.01 开始，递增 0.01）
- 分为「新功能」和「Bug 修复」两类
- 面向用户描述，简洁条目，不写技术细节
- 格式：`## vX.XX (YYYY-MM-DD)` → `### 新功能` / `### Bug 修复`

#### 更新 `docs/development.md`（项目规格）
- 只记录**最终状态**，不记录过程
- 新增功能模块时更新相应章节
- 新增 API 时更新接口概览
- 新增配置时更新环境变量章节
- 修改项目结构时更新目录树

#### 更新其他文档
- 新增 API 接口 → 更新 `docs/api.md`
- 部署配置变更 → 更新 `docs/deployment.md`
- MaaS 服务变更 → 更新 `docs/maas.md`

### 3. 代码提交规范
使用语义化提交信息：
- `feat:` 新功能
- `fix:` 修复 bug
- `docs:` 文档更新
- `style:` 代码格式调整
- `refactor:` 重构
- `test:` 测试相关
- `chore:` 构建/工具相关

### 4. 前端开发规范（Vue）
- 使用 Vue 3 + Composition API
- 组件命名采用 PascalCase
- 样式使用 scoped
- 遵循 ESLint 规则

### 5. 后端开发规范（Node.js）
- 使用 ES6+ 语法
- API 接口遵循 RESTful 规范
- 统一错误处理
- 环境变量配置使用 .env 文件

### 6. 部署规范
- 前端：Vercel 自动部署（main 分支）
- 后端：Railway 自动部署（main 分支）
- 部署前需通过本地测试

### 7. 版本控制规范
- main 分支为生产分支，受保护
- 开发使用 feature 分支
- 合并前需要 code review

### 8. 共享配置规范
- 前后端共用的配置放在 `config/` 目录
- 价格配置：`config/pricing.js`
- 配置文件使用 ES Module 导出
